# hash_table

实现一个线程安全的哈希表，或者说是hash_set，因为本项目中的hash_table没有键值对，只有值的概念，不允许值重复

## 原理

哈希表包含一个数组，用来记录每个桶；每个桶管理一个链表，这些链表里保存着用户数据

数据插入：根据哈希函数，找到对应的桶，插入链表

数据查找：根据哈希函数，找到对应桶，遍历链表查找

数据删除：查找，并移出链表

上述链表结构，可以复用我们已经实现的dlist

## 线程安全

使用细粒度锁来保证线程安全，每个桶持有各自的锁，互不干扰

但是在获取全局信息时，需要对整个哈希表加锁，比如或者哈希表中元素总数

另外，用户如果需要删除哈希表，那么需要保证在没有线程使用哈希表后进行删除，库本身对此不作线程安全性的保证

## API

|API|功能|输入参数|输出参数|返回值|备注|
|--|--|--|--|--|--|
|`hash_table_create`|创建一个哈希表|（1）哈希表桶的数量（2）哈希函数(3)数据比较函数（4）数据打印函数||指向哈希表的指针||
|`hash_table_destroy`|销毁一个哈希表|指向哈希表的指针||错误码||
|`hash_table_insert`|往哈希表中添加数据|（1）指向哈希表的指针（2）指向数据的指针||错误码|哈希表不允许值重复|
|`hash_table_remove`|从哈希表中移除元素|（1）指向哈希表的指针（2）指向元素的指针||错误码||
|`hash_table_contain`|检查哈希表中值是否存在|（1）指向哈希表的指针（2）指向数据的指针||`false`-不存在；`true`-存在||
|`hash_table_get_size`|获取哈希表中元素总数|（1）指向哈希表的指针|（2）指向数量的指针|错误码||
|`hash_table_display`|打印哈希表|指向哈希表的指针||||
